set-window-option -g mode-keys vi

unbind C-b
set -g prefix C-Space

# Add mouse support
set -g mouse on
set-option -g mouse on
set-option -s set-clipboard on

# Autoreload config
bind-key R source-file ~/.config/tmux/tmux.conf \; display "Reloaded ~/.config/tmux/tmux.conf"

# Copy Mode
unbind -T copy-mode-vi Space; #Default for begin-selection
unbind -T copy-mode-vi Enter; #Default for copy-selection

bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xsel --clipboard"

# Move between windows using shift + arrow key
bind h previous-window
bind l next-window

bind n new-window -c "#{pane_current_path}"
bind q kill-window
bind r command-prompt "rename-window '%%'"

set-option -g allow-rename on

# length of tmux status line
set -g status-left-length 32 
set -g status-right-length 150

# separators
tm_left_separator='ÓÇ±'
tm_left_separator_black='ÓÇ∞'
tm_right_separator='ÓÇ≥'
tm_right_separator_black='ÓÇ≤'
tm_session_symbol=''

# statusbar colours
set-option -g status-fg colour30 
set-option -g status-bg colour0
# set-option -g status-attr default
set-option -g status-position bottom

#Set the left and right status
set -g status-left '#[bg=colour7]#[fg=colour0]#{?client_prefix,#[bg=colour2],} ‚ùê #S #[bg=colour0]#[fg=colour7]#{?client_prefix,#[fg=colour2],}ÓÇ∞#{?window_zoomed_flag, üîç ,}#[fg=colour1] ‚ô• '

# Right status - include chevron pattern
set -g status-right ''

# customize how windows are displayed in the status line
set -g window-status-current-format "#[fg=colour0]#[bg=colour4]ÓÇ∞#[fg=colour7]#[bg=colour4] #I* ÓÇ±#[fg=colour7] #W #[fg=colour4]#[bg=colour0]ÓÇ∞"
set -g window-status-format "#[fg=colour244]#[bg=colour0]#I-#[fg=colour240] ÓÇ± #W"

# Set the history limit so we get lots of scrollback.
setw -g history-limit 50000


set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @continuum-restore 'on'
set -g @continuum-boot 'on'

set -g @resurrect-save-shell-history 'on'
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-vim 'session'

# Set refresh rate in seconds
set -g status-interval 5

#Magic fix for neovim cursor bug
set -g -a terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'
